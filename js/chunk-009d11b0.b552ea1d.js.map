{"version":3,"sources":["webpack:///./src/pages/diagram/diagram.vue?8254","webpack:///./src/pages/diagram/diagram.vue","webpack:///./src/pages/diagram/diagram.vue?ddef"],"names":["class","eleType","name","setup","data","painting","ele","document","getElementsByClassName","onmousedown","e","createElementFn","e1","addEle","inputDiv","startX","clientX","startY","clientY","num","onmousemove","e2","createElement","classList","add","style","cssText","top","left","setAttribute","editEle","appendChild","minHeight","width","onmouseup","existenceEle","Array","from","lineEle","allExistenceEle","forEach","item","addEventListener","event","elemove","editEleArr","editEleFn","parentEle","parentNode","w","parseInt","h","children","btnEle","defaultX","defaultY","defaultLeft","offsetLeft","defaultTop","offsetTop","me","cursor","nowX","nowY","moveX","moveY","nowLeft","nowTop","__exports__","render"],"mappings":"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","file":"js/chunk-009d11b0.b552ea1d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./diagram.vue?vue&type=style&index=0&id=2a5e8cfa&scoped=true&lang=less\"","<template>\n  <div class=\"diagram-page\">\n    <div class=\"diagram-page-layout\">\n      <div class=\"tool-box\">\n        <p @click=\"eleType = 'inputEle'\">输入框</p>\n        <p @click=\"eleType = 'lineEle'\">线条</p>\n      </div>\n      <div class=\"diagram-canvas\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onBeforeMount, onMounted } from 'vue';\nexport default {\n  name: '',\n  setup() {\n    const data = reactive({\n      eleType: 'inputEle'\n    });\n    onBeforeMount(() => {});\n    onMounted(() => {\n      painting();\n    });\n\n    // 监听点击拖拽事件\n    const painting = () => {\n      const ele = document.getElementsByClassName('diagram-canvas')[0];\n      ele.onmousedown = function (e) {\n        createElementFn(e, ele);\n      };\n    };\n    // 创建元素添加到页面\n    const createElementFn = (e1, ele) => {\n      const startX = e1.clientX;\n      const startY = e1.clientY;\n      let num = 0;\n      let addEle;\n      let inputDiv;\n      // 移动时设置元素大小\n      document.onmousemove = function (e2) {\n        // 判断只有第一次，创建元素\n        if (!num) {\n          if (data.eleType === 'inputEle') {\n            addEle = document.createElement('div');\n            addEle.classList.add('dragram-ele-div');\n\n            addEle.style.cssText =\n              'overflow:auto;box-sizing: border-box;position: absolute;border:2px solid #fff;background:none;outline: none;color:#fff; border-radius: 4px;';\n          } else {\n            addEle = document.createElement('div');\n            addEle.classList.add('dragram-ele-line');\n            addEle.style.cssText = 'position: absolute;background:#fff;';\n          }\n          // 设置定位\n          addEle.style.top = `${startY}px`;\n          addEle.style.left = `${startX}px`;\n          // 创建可输入的div\n          inputDiv = document.createElement('div');\n          inputDiv.classList.add('edit-ele-div');\n          inputDiv.setAttribute('contenteditable', 'true');\n          inputDiv.style.cssText =\n            'width:100%; border:0px solid #fff;padding:10px 20px;box-sizing: border-box;';\n          // 创建元素右下角的点击可缩放按键\n          const editEle = document.createElement('div');\n          editEle.classList.add('dragram-ele-btn');\n          editEle.style.cssText =\n            'right:0px;bottom:0px;  position: absolute;background:rgba(0,0,0,0);width:10px;height:10px; border-radius: 10px 0 0 0 ;cursor :se-resize;';\n          // 追加到父级元素\n          if (data.eleType === 'inputEle') {\n            addEle.appendChild(inputDiv);\n          }\n\n          addEle.appendChild(editEle);\n          ele.appendChild(addEle);\n          num++;\n        }\n        inputDiv.style.minHeight = `${e2.clientY - e1.clientY}px`;\n        // 更新元素大小\n        addEle.style.width = `${e2.clientX - e1.clientX}px`;\n        // 设置最小高度，高度自适应\n        addEle.style.minHeight = `${e2.clientY - e1.clientY}px`;\n      };\n      // 鼠标抬起时\n      document.onmouseup = function () {\n        // 鼠标抬起获取全部存在元素\n        let existenceEle = Array.from(\n          document.getElementsByClassName('dragram-ele-div')\n        );\n        // 线条元素\n        let lineEle = Array.from(\n          document.getElementsByClassName('dragram-ele-line')\n        );\n        const allExistenceEle = [...existenceEle,...lineEle]\n        // 遍历所有元素，增加移动事件，移除元素后从新绑定创建元素\n        allExistenceEle.forEach((item) => {\n          // 监听鼠标移入清除创建事件\n          item.addEventListener('mouseover', function (event) {\n            ele.onmousedown = function (e) {\n              elemove(e, item);\n            };\n          });\n          // 监听移除事件，移除后从新绑定创建事件\n          item.addEventListener('mouseout', function (event) {\n            ele.onmousedown = function (e) {\n              createElementFn(e, ele);\n            };\n          });\n        });\n        // 编辑按键绑定事件\n        let editEleArr = Array.from(\n          document.getElementsByClassName('dragram-ele-btn')\n        );\n        editEleArr.forEach((item) => {\n          item.addEventListener('mousedown', function (event) {\n            // 点击控制大小按键时，清除移动事件\n            ele.onmousedown = null;\n            editEleFn(event, item);\n          });\n        });\n        document.onmouseup = null;\n        document.onmousemove = null;\n      };\n    };\n    // 监听右下角控制大小\n    const editEleFn = (e, item) => {\n      const parentEle = item.parentNode;\n      const w = parseInt(parentEle.style.width);\n      const h = parseInt(parentEle.style.minHeight);\n      document.onmousemove = function name(e2) {\n        parentEle.children[0].style.minHeight = `${\n          h + e2.clientY - e.clientY\n        }px`;\n        // 更新元素大小\n        parentEle.style.width = `${w + e2.clientX - e.clientX}px`;\n        // 设置最小高度，高度自适应\n        parentEle.style.minHeight = `${h + e2.clientY - e.clientY}px`;\n      };\n      // 取消拖拽事件\n      document.onmouseup = function () {\n        document.onmouseup = null;\n        document.onmousemove = null;\n      };\n    };\n    // 元素移动方法\n    const elemove = (e, btnEle) => {\n      let defaultX = e.clientX; //默认位置的x轴坐标\n      let defaultY = e.clientY; //默认位置的y轴坐标\n      let defaultLeft = btnEle.offsetLeft; //默认左侧偏移位置\n      let defaultTop = btnEle.offsetTop; //默认顶部偏移位置\n      //帮助按钮鼠标移动时\n      document.onmousemove = (me) => {\n        btnEle.style.cursor = 'move'; //修改鼠标样式\n        let nowX = me.clientX; //当前位置的x轴坐标\n        let nowY = me.clientY; //当前位置的y轴坐标\n\n        let moveX = defaultX - nowX; //在x轴上的移动距离\n        let moveY = defaultY - nowY; //在y轴上移动的距离\n\n        let nowLeft = defaultLeft - moveX; //当前位置左侧偏移量\n        let nowTop = defaultTop - moveY; //当前位置顶部偏移量\n\n        btnEle.style.left = `${nowLeft}px`; //将当前位置赋值给帮助按钮\n        btnEle.style.top = `${nowTop}px`;\n      };\n\n      //鼠标抬起时\n      document.onmouseup = () => {\n        btnEle.style.cursor = 'default'; //重置鼠标样式\n        //清除事件\n        document.onmousemove = null;\n        document.onmouseup = null;\n      };\n    };\n    return {\n      ...toRefs(data)\n    };\n  }\n};\n</script>\n<style scoped lang=\"less\">\n.diagram-page {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  box-sizing: border-box;\n  .diagram-page-layout {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    .tool-box {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 50px;\n      width: 100%;\n      z-index: 1;\n      padding: 0px 20px;\n      box-sizing: border-box;\n\n      p {\n        float: left;\n        line-height: 50px;\n        color: #fff;\n        margin-right: 20px;\n        cursor: pointer;\n      }\n    }\n    .diagram-canvas {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      padding-top: 60px;\n      box-sizing: border-box;\n    }\n  }\n}\n</style>\n","import { render } from \"./diagram.vue?vue&type=template&id=2a5e8cfa&scoped=true\"\nimport script from \"./diagram.vue?vue&type=script&lang=js\"\nexport * from \"./diagram.vue?vue&type=script&lang=js\"\n\nimport \"./diagram.vue?vue&type=style&index=0&id=2a5e8cfa&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\a2_swh\\\\ProjectSourceCode\\\\PersonalBlog\\\\personal-notes-vue3\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2a5e8cfa\"]])\n\nexport default __exports__"],"sourceRoot":""}